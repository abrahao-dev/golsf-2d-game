<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golsf - 2D Golf Game</title>

    <link rel="stylesheet" href="/public/css/style.css">  <!-- Parte Local -->
    <link rel="stylesheet" href="/css/style.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Golsf - 2D Golf Game</h1>
        </header>
        <main>
            <canvas id="golfCanvas" width="800" height="600" tabindex="1"></canvas>
            
            <div class="ui-elements">
                <div class="scoreboard-container">
                    <div id="roundDisplay" class="round-display">Nível 1</div>
                    <div class="scoreboard">
                        <p>Pontuação <span id="score">0</span></p>
                    </div>

                    <div id="activeUsersContainer">
                        <h2>Usuários Ativos</h2>
                        <ul id="activeUsersList"></ul>
                    </div>
                </div>

                <div id="fpsCounter" class="counter"></div>
                
                <div id="pingCounter" class="counter"></div>
                <div id="controlsHint" class="controls-hint">
                    Pressione 'W' ou Clique com o botão esquerdo | Acertar a bola
                </div>
                <div class="charge-bar">
                    <div id="chargeLevel"></div>
                </div>
            </div>
        </main>
        <footer>
            <p>© Grupo Golsf | <a href="https://github.com/abrahao-dev" target="_blank">Abrahão Dev</a>. Todos os direitos reservados.</p>        </footer>
    </div>
    <script src="/js/main.js"></script>
    <script src="/public/js/main.js"></script> <!-- Parte Local -->
    
    <script>
        async function fetchActiveUsers() {
            try {
                const response = await fetch('http://localhost:3000/api/active-users');
                const users = await response.json();
                const activeUsersList = document.getElementById('activeUsersList');
                activeUsersList.innerHTML = ''; // Limpa a lista antes de adicionar novos usuários

                users.forEach(user => {
                    const listItem = document.createElement('li');
                    listItem.textContent = `${user.player_name}: Pontuação ${user.score}`;
                    activeUsersList.appendChild(listItem);
                });
            } catch (error) {
                console.error('Erro ao buscar usuários ativos:', error);
            }
        }

        // Chama a função para buscar usuários ativos ao carregar a página
        fetchActiveUsers();
    </script>
</body> 
</html>